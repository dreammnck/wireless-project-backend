// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int    @id @default(autoincrement())
  username  String @unique
  password  String
  firstname String
  lastname  String
  role      Role
}

enum Role {
  DOCTOR
  NURSE
}

model Floor {
  id    Int    @id @default(autoincrement())
  name  String
  rooms Room[]
}

model Room {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  floorId   Int
  isTrigger Boolean   @default(false)
  floor     Floor     @relation(fields: [floorId], references: [id])
  patients  Patient[]
}

model Patient {
  id              Int               @id @default(autoincrement())
  firstname       String
  lastname        String
  age             Int
  roomId          Int
  isCheckout      Boolean           @default(false)
  room            Room              @relation(fields: [roomId], references: [id])
  medicalHostory  MedicleHistory[]
  infusionHistory InfusionHistory[]
}

model MedicleHistory {
  id             Int       @id @default(autoincrement())
  medicalHistory String
  doctor         String
  patientId      Int
  createdDate    DateTime  @default(now())
  updatedDate    DateTime?
  deletedDate    DateTime?
  patient        Patient   @relation(fields: [patientId], references: [id])
}

model InfusionHistory {
  id           Int       @id @default(autoincrement())
  patientId    Int
  dropRate     Float
  serialNumber String
  nurse        String
  createdDate  DateTime  @default(now())
  updatedDate  DateTime?
  isCompleted  Boolean   @default(false)
  patient      Patient   @relation(fields: [patientId], references: [id])
}
